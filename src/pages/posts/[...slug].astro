---
import MuseumLayout from '../../layouts/MuseumLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
    const exhibits = await getCollection('exhibits');
    return exhibits.map(entry => ({
        params: { slug: entry.slug },
        props: { entry },
    }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
const frontmatter = entry.data;
---

<MuseumLayout title={frontmatter.title} description={frontmatter.description || frontmatter.excerpt}>
	<article class="max-w-3xl mx-auto pb-20 animate-fade-in relative">
        
        <!-- Header / Title Area -->
        <header class="text-center mb-16 relative">
            <!-- Decorative line above -->
            <div class="w-1/2 h-px bg-gradient-to-r from-transparent via-museum-gold/50 to-transparent mx-auto mb-8"></div>
            
            <h1 class="font-display text-4xl md:text-5xl lg:text-6xl text-museum-gold mb-6 drop-shadow-lg leading-tight">
                {frontmatter.title}
            </h1>
            
            <div class="flex justify-center items-center gap-4 text-sm font-display tracking-[0.2em] text-museum-paper/60 uppercase">
                {frontmatter.author && <span>{frontmatter.author}</span>}
                {frontmatter.author && frontmatter.date && <span class="text-museum-gold">•</span>}
                {frontmatter.date && (
                    <time datetime={frontmatter.date}>
                        {new Date(frontmatter.date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
                    </time>
                )}
            </div>

            <!-- Decorative line below -->
            <div class="w-1/2 h-px bg-gradient-to-r from-transparent via-museum-gold/50 to-transparent mx-auto mt-8"></div>
        </header>

        <!-- Main Content (The Manuscript) -->
        <div class="
            prose-museum 
            drop-cap
            px-8 py-12 md:p-16
            bg-museum-paper/5 
            rounded-sm 
            shadow-2xl 
            backdrop-blur-sm
            border-y border-museum-gold/10
            relative
        ">
            <!-- Corner decorations for the paper feel -->
            <div class="absolute top-0 left-0 w-8 h-8 border-t border-l border-museum-gold/20"></div>
            <div class="absolute top-0 right-0 w-8 h-8 border-t border-r border-museum-gold/20"></div>
            <div class="absolute bottom-0 left-0 w-8 h-8 border-b border-l border-museum-gold/20"></div>
            <div class="absolute bottom-0 right-0 w-8 h-8 border-b border-r border-museum-gold/20"></div>

            <Content />
        </div>
        
        <!-- Back Navigation -->
        <div class="mt-16 text-center">
            <a href="/" class="inline-flex items-center gap-2 font-display text-museum-gold hover:text-museum-crimson transition-colors tracking-widest text-sm uppercase group">
                <span class="transform group-hover:-translate-x-1 transition-transform">←</span> Return to Gallery
            </a>
        </div>

	</article>
</MuseumLayout>
